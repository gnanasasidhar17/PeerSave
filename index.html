<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PeerSave - Save Together, Achieve Together</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="style.css" rel="stylesheet" />
</head>
<body class="min-h-screen font-sans">
    <div id="app">
        <!-- Header -->
        <header class="max-w-6xl mx-auto flex items-center justify-between mb-6 p-6">
            <div class="header-glass p-4 rounded-2xl">
                <h1 class="text-2xl font-bold text-white floating"><svg width="40" height="32" viewBox="0 0 300 180" xmlns="http://www.w3.org/2000/svg">
  <!-- Left person -->
  <g fill="#228B22">
    <circle cx="80" cy="80" r="18"/>
    <!-- Body -->
    <path d="M50 110 Q50 105 55 105 L105 105 Q110 105 110 110 L110 160 Q110 168 102 168 L58 168 Q50 168 50 160 Z"/>
  </g>
  
  <!-- Center person (larger) -->
  <g fill="#228B22">
    <!-- Head -->
    <circle cx="150" cy="65" r="22"/>
    <!-- Body -->
    <path d="M115 100 Q115 95 120 95 L180 95 Q185 95 185 100 L185 160 Q185 170 175 170 L125 170 Q115 170 115 160 Z"/>
  </g>
  
  <!-- Right person -->
  <g fill="#228B22">
    <!-- Head -->
    <circle cx="220" cy="80" r="18"/>
    <!-- Body -->
    <path d="M190 110 Q190 105 195 105 L245 105 Q250 105 250 110 L250 160 Q250 168 242 168 L198 168 Q190 168 190 160 Z"/>
  </g>
  
  <!-- Left dollar coin -->
  <g>
    <circle cx="90" cy="40" r="20" fill="#228B22"/>
    <text x="90" y="48" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white">$</text>
  </g>
  
  <!-- Right dollar coin -->
  <g>
    <circle cx="200" cy="30" r="18" fill="#228B22"/>
    <text x="200" y="37" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="white">$</text>
  </g>
</svg>PeerSave</h1>
                <p class="text-sm text-white/80">Save together, achieve together ✨</p>
            </div>
            <nav class="space-x-3">
                <button onclick="setView('home')" id="nav-home" class="px-4 py-2 rounded-full nav-active transition-all duration-300">🏠 Home</button>
                <button onclick="setView('dashboard')" id="nav-dashboard" class="px-4 py-2 rounded-full nav-inactive transition-all duration-300">📊 Dashboard</button>
                <button onclick="setView('leaderboard')" id="nav-leaderboard" class="px-4 py-2 rounded-full nav-inactive transition-all duration-300">🏆 Leaderboard</button>
            </nav>
        </header>

        <main class="max-w-6xl mx-auto grid grid-cols-12 gap-6 px-6">
            <!-- Sidebar -->
            <aside class="col-span-12 md:col-span-4 glass-card p-6 rounded-2xl">
                <div class="mb-6">
                    <h2 class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">Your Groups 🎯</h2>
                    <p class="text-sm text-gray-600">Join or create groups with friends</p>
                </div>
                
                <div id="groups-list" class="space-y-3 mb-4">
                    <!-- Groups will be populated here -->
                </div>

                <!-- Create Group Form -->
                <form id="create-group-form" class="mt-6 p-4 glass rounded-xl">
                    <h3 class="text-sm font-semibold mb-3 text-purple-700">✨ Create New Group</h3>
                    <input id="group-name" placeholder="Group name" class="w-full p-3 rounded-lg input-glass mb-3" />
                    <input id="group-goal" placeholder="Goal amount (₹)" type="number" class="w-full p-3 rounded-lg input-glass mb-3" />
                    <input id="initial-contribution" placeholder="Your initial contribution (₹)" type="number" class="w-full p-3 rounded-lg input-glass mb-3" />
                    <button type="submit" class="w-full py-3 rounded-lg btn-gradient-primary font-semibold">🚀 Create & Join</button>
                </form>

                <!-- Daily Tip -->
                <div class="mt-6 p-4 glass rounded-xl">
                    <h4 class="text-sm font-semibold text-orange-700">💡 Daily Tip</h4>
                    <p id="daily-tip" class="text-xs text-gray-700 mt-2 font-medium"></p>
                </div>
            </aside>

            <!-- Main Content -->
            <section class="col-span-12 md:col-span-8">
                <!-- Home View -->
                <div id="home-view" class="glass-card p-8 rounded-2xl">
                    <h2 class="text-2xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Welcome back 👋</h2>
                    <p class="text-gray-600 mb-6">Pick a group to view progress, add contributions, and compete on the leaderboard.</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-6 rounded-xl glass border-l-4 border-blue-400">
                            <h3 class="font-bold mb-4 text-blue-700">⚡ Quick Add Contribution</h3>
                            <form id="quick-add-form" class="space-y-3">
                                <select id="quick-group" class="w-full p-3 input-glass rounded-lg">
                                    <!-- Options populated by JS -->
                                </select>
                                <input id="quick-name" value="You" class="w-full p-3 input-glass rounded-lg" />
                                <div class="flex gap-3">
                                    <input id="quick-amount" value="100" type="number" class="flex-1 p-3 input-glass rounded-lg" />
                                    <button type="submit" class="px-6 rounded-lg btn-gradient-primary font-semibold">Add ✨</button>
                                </div>
                            </form>
                        </div>

                        <div class="p-6 rounded-xl glass border-l-4 border-pink-400">
                            <h3 class="font-bold mb-4 text-pink-700">🎉 Recent Activity</h3>
                            <ul id="recent-activity" class="space-y-2">
                                <li class="activity-item text-sm">Welcome to PeerSave! 🎉</li>
                                <li class="activity-item text-sm">Create your first group to get started 🚀</li>
                                <li class="activity-item text-sm">Invite friends to save together 👥</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Dashboard View -->
                <div id="dashboard-view" class="glass-card p-8 rounded-2xl" style="display: none;">
                    <div class="flex flex-col md:flex-row justify-between items-start mb-8">
                        <div>
                            <h2 id="dashboard-title" class="text-2xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">Select a group</h2>
                            <p id="dashboard-subtitle" class="text-sm text-gray-600 mt-1">Group dashboard</p>
                        </div>
                        <div id="dashboard-stats" class="mt-4 md:mt-0 p-4 glass rounded-xl">
                            <!-- Stats populated by JS -->
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2 p-6 glass-card rounded-xl border-l-4 border-green-400">
                            <h3 class="font-bold mb-4 text-green-700">📈 Progress Tracker</h3>
                            <div id="progress-panel">
                                <div class="text-sm text-gray-500">No group selected</div>
                            </div>
                        </div>

                        <div class="p-6 glass-card rounded-xl border-l-4 border-purple-400">
                            <h3 class="font-bold mb-4 text-purple-700">👥 Members</h3>
                            <ul id="members-list" class="space-y-3 text-sm text-gray-700 mb-6">
                                <!-- Members populated by JS -->
                            </ul>
                            <div id="add-contribution-form" style="display: none;">
                                <div class="p-4 glass rounded-xl">
                                    <h4 class="text-sm font-semibold mb-3 text-blue-700">💰 Add Contribution</h4>
                                    <form id="contribution-form" class="space-y-3">
                                        <input id="contributor-name" value="You" class="w-full p-3 input-glass rounded-lg" />
                                        <div class="flex gap-3">
                                            <input id="contribution-amount" value="100" type="number" class="flex-1 p-3 input-glass rounded-lg" />
                                            <button type="submit" class="px-4 rounded-lg btn-gradient-success font-semibold">Add 💸</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="badges-section" class="mt-8 p-6 glass-card rounded-xl">
                        <h3 class="font-bold mb-4 text-indigo-700">🏅 Group Streaks & Badges</h3>
                        <div class="flex flex-wrap gap-4 text-sm font-semibold">
                            <div class="p-4 rounded-xl badge-purple">🔥 Consistency: 7 days</div>
                            <div class="p-4 rounded-xl badge-pink">👑 Top Contributor: You</div>
                            <div class="p-4 rounded-xl badge-green">🎯 Milestone: Getting started</div>
                            <div class="p-4 rounded-xl badge-blue">⭐ Team Player</div>
                            <div class="p-4 rounded-xl badge-orange">🚀 Goal Crusher</div>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard View -->
                <div id="leaderboard-view" class="glass-card p-8 rounded-2xl" style="display: none;">
                    <div class="text-center mb-8">
                        <h2 class="text-2xl font-bold bg-gradient-to-r from-yellow-500 to-orange-600 bg-clip-text text-transparent mb-2">🏆 Leaderboard</h2>
                        <p class="text-gray-600">See who's crushing their savings goals!</p>
                    </div>
                    <ol id="leaderboard-list" class="space-y-4">
                        <!-- Leaderboard populated by JS -->
                    </ol>
                </div>
            </section>
        </main>

        <footer class="max-w-6xl mx-auto mt-8 text-center pb-6">
            <div class="glass p-4 rounded-2xl mx-6">
                <p class="text-xs text-white/80">PeerSave ✨ Prototype UI — connect a backend to persist data</p>
            </div>
        </footer>
    </div>

    <script>
        // Application State
        let currentView = 'home';
        let selectedGroup = null;
        let groups = [
            {
                id: 1,
                name: "Trip to Goa",
                goal: 20000,
                members: [
                    { name: "You", contributed: 2000 },
                    { name: "Aman", contributed: 1500 },
                    { name: "Riya", contributed: 1000 }
                ],
                createdAt: "2025-09-01"
            },
            {
                id: 2,
                name: "Laptop Fund",
                goal: 50000,
                members: [
                    { name: "You", contributed: 5000 },
                    { name: "Kavya", contributed: 4000 }
                ],
                createdAt: "2025-08-12"
            }
        ];

        const tips = [
            "Automate small transfers — consistency beats size.",
            "Round up purchases and stash the change.",
            "Set visible goals with photos — it increases motivation.",
            "Celebrate milestones (5%, 25%, 50%)."
        ];

        // Utility Functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN').format(amount);
        }

        function calculateProgress(group) {
            const total = group.members.reduce((sum, member) => sum + member.contributed, 0);
            const percent = Math.min(100, Math.round((total / group.goal) * 100));
            return { total, percent };
        }

        function generateId() {
            return Date.now();
        }

        // View Management
        function setView(view) {
            currentView = view;
            
            // Update navigation
            document.querySelectorAll('nav button').forEach(btn => {
                btn.className = 'px-3 py-1 rounded text-gray-600';
            });
            document.getElementById(`nav-${view}`).className = 'px-3 py-1 rounded bg-white shadow';

            // Show/hide views
            document.getElementById('home-view').style.display = view === 'home' ? 'block' : 'none';
            document.getElementById('dashboard-view').style.display = view === 'dashboard' ? 'block' : 'none';
            document.getElementById('leaderboard-view').style.display = view === 'leaderboard' ? 'block' : 'none';

            if (view === 'dashboard') {
                renderDashboard();
            } else if (view === 'leaderboard') {
                renderLeaderboard();
            }
        }

        // Rendering Functions
        function renderGroups() {
            const container = document.getElementById('groups-list');
            container.innerHTML = groups.map(group => {
                const progress = calculateProgress(group);
                const isSelected = selectedGroup === group.id;
                
                return `
                    <div class="p-3 rounded-lg border card-hover cursor-pointer ${isSelected ? 'border-indigo-400 bg-indigo-50' : 'border-gray-100 bg-white'}" 
                         onclick="selectGroup(${group.id})">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="font-medium">${group.name}</div>
                                <div class="text-xs text-gray-500">Goal: ₹${formatCurrency(group.goal)}</div>
                            </div>
                            <div class="text-sm font-semibold">${progress.percent}%</div>
                        </div>
                        <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div style="width: ${progress.percent}%" class="h-full rounded-full gradient-progress"></div>
                        </div>
                        <div class="mt-2 flex justify-between text-xs text-gray-500">
                            <span>${group.members.length} members</span>
                            <button onclick="event.stopPropagation(); selectGroup(${group.id}); setView('dashboard')" class="underline hover:text-indigo-600">Open</button>
                        </div>
                    </div>
                `;
            }).join('');

            // Update quick add dropdown
            const quickGroupSelect = document.getElementById('quick-group');
            quickGroupSelect.innerHTML = groups.map(group => 
                `<option value="${group.id}">${group.name}</option>`
            ).join('');
        }

        function renderDashboard() {
            const group = groups.find(g => g.id === selectedGroup);
            
            if (!group) {
                document.getElementById('dashboard-title').textContent = 'Select a group';
                document.getElementById('dashboard-subtitle').textContent = 'Group dashboard';
                document.getElementById('dashboard-stats').innerHTML = '';
                document.getElementById('progress-panel').innerHTML = '<div class="text-sm text-gray-500">No group selected</div>';
                document.getElementById('members-list').innerHTML = '';
                document.getElementById('add-contribution-form').style.display = 'none';
                return;
            }

            const progress = calculateProgress(group);
            
            // Update header
            document.getElementById('dashboard-title').textContent = group.name;
            document.getElementById('dashboard-subtitle').textContent = `Group dashboard • ${group.createdAt}`;
            document.getElementById('dashboard-stats').innerHTML = `
                <div class="text-sm text-gray-600">Goal: ₹${formatCurrency(group.goal)}</div>
                <div class="text-sm text-gray-600">Members: ${group.members.length}</div>
            `;

            // Update progress panel
            document.getElementById('progress-panel').innerHTML = `
                <div class="mb-2 text-sm text-gray-600">
                    Collected: ₹${formatCurrency(progress.total)} • Goal: ₹${formatCurrency(group.goal)}
                </div>
                <div class="w-full bg-gray-200 h-4 rounded-full overflow-hidden">
                    <div style="width: ${progress.percent}%" class="h-full rounded-full gradient-progress"></div>
                </div>
                <div class="mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs text-gray-700">
                    ${group.members.map(member => `
                        <div class="p-2 border rounded text-center">
                            <div class="font-semibold">${member.name}</div>
                            <div>₹${formatCurrency(member.contributed)}</div>
                        </div>
                    `).join('')}
                </div>
            `;

            // Update members list
            document.getElementById('members-list').innerHTML = group.members.map(member => `
                <li class="flex justify-between">
                    <span>${member.name}</span>
                    <span>₹${formatCurrency(member.contributed)}</span>
                </li>
            `).join('');

            document.getElementById('add-contribution-form').style.display = 'block';
        }

        function renderLeaderboard() {
            const leaderboard = [...groups]
                .map(group => ({
                    name: group.name,
                    total: group.members.reduce((sum, member) => sum + member.contributed, 0)
                }))
                .sort((a, b) => b.total - a.total)
                .slice(0, 10);

            document.getElementById('leaderboard-list').innerHTML = leaderboard.map((item, index) => `
                <li class="flex justify-between p-3 rounded border card-hover">
                    <div>
                        <div class="font-medium">${index + 1}. ${item.name}</div>
                        <div class="text-xs text-gray-500">Group total</div>
                    </div>
                    <div class="font-semibold">₹${formatCurrency(item.total)}</div>
                </li>
            `).join('');
        }

        function renderDailyTip() {
            const randomTip = tips[Math.floor(Math.random() * tips.length)];
            document.getElementById('daily-tip').textContent = randomTip;
        }

        // Actions
        function selectGroup(groupId) {
            selectedGroup = groupId;
            renderGroups();
            if (currentView === 'dashboard') {
                renderDashboard();
            }
        }

        function createGroup(name, goal, initialContribution) {
            const id = generateId();
            const newGroup = {
                id,
                name: name || `Group ${id}`,
                goal: Number(goal) || 1000,
                members: [{ name: "You", contributed: Number(initialContribution) || 0 }],
                createdAt: new Date().toISOString().slice(0, 10)
            };
            
            groups.unshift(newGroup);
            selectedGroup = id;
            renderGroups();
            setView('dashboard');
            
            // Clear form
            document.getElementById('create-group-form').reset();
        }

        function addContribution(groupId, memberName, amount) {
            const groupIndex = groups.findIndex(g => g.id === groupId);
            if (groupIndex === -1) return;
            
            const group = groups[groupIndex];
            const memberIndex = group.members.findIndex(m => m.name === memberName);
            
            if (memberIndex !== -1) {
                group.members[memberIndex].contributed += amount;
            } else {
                group.members.push({ name: memberName, contributed: amount });
            }
            
            renderGroups();
            if (currentView === 'dashboard' && selectedGroup === groupId) {
                renderDashboard();
            }
        }

        // Event Listeners
        document.getElementById('create-group-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('group-name').value;
            const goal = document.getElementById('group-goal').value;
            const contribution = document.getElementById('initial-contribution').value;
            createGroup(name, goal, contribution);
        });

        document.getElementById('quick-add-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const groupId = Number(document.getElementById('quick-group').value);
            const name = document.getElementById('quick-name').value;
            const amount = Number(document.getElementById('quick-amount').value);
            addContribution(groupId, name, amount);
            document.getElementById('quick-amount').value = 100;
        });

        document.getElementById('contribution-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('contributor-name').value;
            const amount = Number(document.getElementById('contribution-amount').value);
            addContribution(selectedGroup, name, amount);
            document.getElementById('contribution-amount').value = 100;
        });

        // Initialize App
        function init() {
            if (groups.length > 0) {
                selectedGroup = groups[0].id;
            }
            renderGroups();
            renderDailyTip();
            setView('home');
        }

        // Start the app
        init();
    </script>
</body>
</html>